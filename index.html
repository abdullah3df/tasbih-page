<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ØªØ³Ø¨ÙŠØ­ â€” Ø¹Ø´Ø± Ø«Ù… Ø´Ø§Ø±Ùƒ Ø§Ù„Ø£Ø¬Ø±</title>
<meta name="theme-color" content="#0c1716">
<style>
  :root{
    --bg1:#0c1716; --bg2:#112927; --card:#0f2321; --edge:#1b3f3a;
    --text:#eaf7f5; --muted:#a6c8c1; --ring:#183a36;
    --accent:#25c3a7; --accent2:#89f3df; --share:#1fa855; --danger:#ff6b6b;
  }
  *{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial}
  body{
    margin:0; min-height:100dvh; display:grid; place-items:center; color:var(--text);
    background:
      radial-gradient(900px 600px at 100% -10%, #1a5e54 0, #0000 60%),
      radial-gradient(900px 700px at -10% 120%, #14433f 0, #0000 60%),
      linear-gradient(180deg,var(--bg1),var(--bg2));
  }
  .wrap{ width:min(96vw,640px); padding:22px; }
  .card{
    background:linear-gradient(180deg,#0e201e,var(--card));
    border:1px solid var(--edge); border-radius:24px; padding:24px;
    box-shadow:0 20px 60px #0007;
  }
  .top{display:flex;gap:10px;align-items:center;justify-content:space-between}
  h1{margin:0;font-size:1.15rem;color:var(--muted)}
  .btn-sm{
    background:#0e2422;border:1px solid var(--edge);color:var(--text);
    padding:.5rem .8rem;border-radius:999px;font-weight:800;cursor:pointer;
  }

  .phrase{ text-align:center; font-weight:900; line-height:2; margin:10px 0 14px; font-size:1.2rem; }

  /* Ø§Ù„Ø²Ø± Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ */
  .big{
    margin:14px auto; width:240px; height:240px; border-radius:50%;
    position:relative; display:grid; place-items:center; cursor:pointer;
    background:conic-gradient(var(--accent) 0deg, var(--accent2) var(--deg), var(--ring) var(--deg));
    transition:background .25s ease, transform .12s ease, width .2s ease, height .2s ease;
    box-shadow:0 16px 44px #0006, inset 0 0 0 8px #13302c, inset 0 0 0 1px #265d55;
    user-select:none; border:none;
  }
  .big:active{ transform:translateY(1px) scale(.995); }
  .inner{
    width:86%; height:86%; border-radius:50%; display:grid; place-items:center; text-align:center; padding:12px;
    background:linear-gradient(180deg,#0d1e1c,#112725); border:1px solid #1f4c45;
  }
  .label{font-size:1.25rem;font-weight:900}
  .subtle{font-size:.95rem;color:var(--muted);margin-top:6px}

  .big.share{ width:280px; height:280px;
    background:conic-gradient(var(--share) 0deg, #55d78e var(--deg), #164c32 var(--deg));
    box-shadow:0 20px 50px #0008, inset 0 0 0 8px #0f3b28, inset 0 0 0 1px #178a4c;
  }
  .big.share .label{font-size:1.35rem}

  .stats{display:flex;gap:10px;margin-top:12px}
  .pill{flex:1;text-align:center;padding:10px 12px;border-radius:999px;background:#0f2422;border:1px solid var(--edge);font-weight:800}

  .note{font-size:.9rem;color:var(--muted);text-align:center;margin-top:10px}
  .ok{ color:#9ff3e4; font-size:.88rem; text-align:center; margin-top:8px; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="top">
        <h1>Ø§Ø°ÙƒØ± Ø§Ù„Ù„Ù‡ â€” Ø¹Ø´Ø± ØªØ³Ø¨ÙŠØ­Ø§Øª Ø«Ù… Ø´Ø§Ø±Ùƒ Ø§Ù„Ø£Ø¬Ø±</h1>
        <button id="reset" class="btn-sm">ØªØµÙÙŠØ±</button>
      </div>

      <div id="phrase" class="phrase">Ø§Ø¨Ø¯Ø£: Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø§Ù„ÙƒØ¨ÙŠØ± Ù„Ù„ØªØ³Ø¨ÙŠØ­.</div>

      <button id="big" class="big" style="--deg:0deg" aria-label="Ø²Ø± Ø§Ù„ØªØ³Ø¨ÙŠØ­">
        <div class="inner">
          <div id="label" class="label">Ø³ÙØ¨Ù‘ÙØ­</div>
          <div class="subtle">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="left">10</span> / 10</div>
        </div>
      </button>

      <div class="stats">
        <div class="pill">Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯: <span id="count">0</span></div>
        <div class="pill">Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª: <span id="shares">0</span></div>
      </div>

      <div id="msg" class="ok"></div>
      <div class="note">Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØªØ±Ø³Ù„ <b>Ù†Øµ Ø§Ù„Ø°ÙÙƒØ± ÙÙ‚Ø·</b> Ø¯ÙˆÙ† Ø£ÙŠ Ø±Ø§Ø¨Ø·.</div>
    </div>
  </div>

<script>
(function(){
  const phrases = ["Ø³ÙØ¨Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡","ÙˆØ§Ù„Ø­Ù…Ø¯Ù Ù„Ù„Ù‡","ÙˆÙ„Ø§ Ø¥Ù„Ù‡Ù Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡","ÙˆØ§Ù„Ù„Ù‡Ù Ø£ÙƒØ¨Ø±"];
  const dhikrText =
`Ø³ÙØ¨Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡ØŒ ÙˆØ§Ù„Ø­Ù…Ø¯Ù Ù„Ù„Ù‡ØŒ ÙˆÙ„Ø§ Ø¥Ù„Ù‡Ù Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ØŒ ÙˆØ§Ù„Ù„Ù‡Ù Ø£ÙƒØ¨Ø±.
Ù„Ù†Ù†Ø´Ø± Ø§Ù„Ø°Ù‘ÙÙƒØ±Ø› ÙˆØ§Ù„Ø¯Ø§Ù„Ù‘ Ø¹Ù„Ù‰ Ø§Ù„Ø®ÙŠØ± ÙƒÙØ§Ø¹Ù„Ù‡ ğŸŒ¿`;

  const big = document.getElementById('big');
  const label = document.getElementById('label');
  const phraseEl = document.getElementById('phrase');
  const leftEl = document.getElementById('left');
  const countEl = document.getElementById('count');
  const sharesEl = document.getElementById('shares');
  const resetBtn = document.getElementById('reset');
  const msg = document.getElementById('msg');

  let target=10, left=10, count=0, shareMode=false;
  let shares= +localStorage.getItem('tasbih_shares_clean') || 0;
  sharesEl.textContent = shares;

  function setProgress(){
    const done = target-left;
    big.style.setProperty('--deg', (done/target)*360 + 'deg');
  }
  function updateUI(){
    leftEl.textContent = left;
    countEl.textContent = count;
    setProgress();

    if(left===0 && !shareMode){
      shareMode = true;
      big.classList.add('share');
      label.textContent = "Ø´Ø§Ø±Ùƒ Ø§Ù„Ø£Ø¬Ø±";
      phraseEl.textContent = "Ø£Ø­Ø³Ù†Øª! Ø§Ø¶ØºØ· Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨.";
      if(navigator.vibrate) navigator.vibrate(40);
    }
  }
  function flash(t){ msg.textContent = t; clearTimeout(flash._t); flash._t=setTimeout(()=>msg.textContent="",2500); }

  function shareOnlyText(){
    // 1) Web Share API Ø¥Ù† ØªÙˆÙÙ‘Ø± (Ù„Ù† Ù†Ù…Ø±Ø± Ø£ÙŠ URL)
    if(navigator.share){
      navigator.share({ text: dhikrText })
        .then(()=> afterShare())
        .catch(()=>{ /* ØªØ¬Ø§Ù‡Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */ });
      return;
    }
    // 2) ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Øµ ÙÙ‚Ø·
    const url = "https://wa.me/?text=" + encodeURIComponent(dhikrText); // Ù†Øµ ÙÙ‚Ø·ØŒ Ø¨Ù„Ø§ Ø±ÙˆØ§Ø¨Ø·
    window.open(url, "_blank");
    afterShare();
  }
  function afterShare(){
    shares++; localStorage.setItem('tasbih_shares_clean', shares);
    sharesEl.textContent = shares;
    flash("Ø¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒâ€”ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.");
    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ù‘
    shareMode=false; left=10; count=0;
    big.classList.remove('share');
    label.textContent="Ø³ÙØ¨Ù‘ÙØ­";
    phraseEl.textContent="Ø§Ø¨Ø¯Ø£: Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø§Ù„ÙƒØ¨ÙŠØ± Ù„Ù„ØªØ³Ø¨ÙŠØ­.";
    setProgress(); updateUI();
  }

  function tap(){
    if(shareMode){ shareOnlyText(); return; }
    if(left>0){
      count++; left--;
      phraseEl.textContent = phrases[(count-1)%phrases.length];
      if(navigator.vibrate) navigator.vibrate(18);
      updateUI();
    }
  }
  function resetAll(){
    shareMode=false; left=10; count=0;
    big.classList.remove('share');
    label.textContent="Ø³ÙØ¨Ù‘ÙØ­";
    phraseEl.textContent="Ø§Ø¨Ø¯Ø£: Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø§Ù„ÙƒØ¨ÙŠØ± Ù„Ù„ØªØ³Ø¨ÙŠØ­.";
    setProgress(); updateUI();
  }

  big.addEventListener('click', tap);
  resetBtn.addEventListener('click', resetAll);
  updateUI();
})();
</script>
</body>
</html>
